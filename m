Return-Path: <linux-kbuild+bounces-7217-lists+linux-kbuild=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-kbuild@lfdr.de
Delivered-To: lists+linux-kbuild@lfdr.de
Received: from am.mirrors.kernel.org (am.mirrors.kernel.org [147.75.80.249])
	by mail.lfdr.de (Postfix) with ESMTPS id C1123AC057B
	for <lists+linux-kbuild@lfdr.de>; Thu, 22 May 2025 09:18:17 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by am.mirrors.kernel.org (Postfix) with ESMTPS id EE0F91BA743C
	for <lists+linux-kbuild@lfdr.de>; Thu, 22 May 2025 07:18:30 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 4FD4D22331E;
	Thu, 22 May 2025 07:17:57 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b="AYZANZLF"
X-Original-To: linux-kbuild@vger.kernel.org
Received: from smtp.kernel.org (aws-us-west-2-korg-mail-1.web.codeaurora.org [10.30.226.201])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 1F65C223313;
	Thu, 22 May 2025 07:17:55 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=10.30.226.201
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1747898277; cv=none; b=LxKwGO6kS/ChIHHhRUr/rPAsRdEQoZz8252a+x/OPBCAlAcCiC2rCCUXOn1OT5B7UPeQ1SFuMRfwcLDLmBAXGTWEj9p27HupLpzB/O6q4qGhwyVM7T5k4qC9Jg0QQaepAxmBLKMszB/DwGNkhydATcoSjjkm9XNE4KfoB906l6w=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1747898277; c=relaxed/simple;
	bh=RBfEx3162mbB+OlkOVLAYGSIHMmdR4c1LkTJqUJI4rE=;
	h=From:To:Cc:Subject:Date:Message-ID:In-Reply-To:References:
	 MIME-Version:Content-Type; b=Emi8qh+S9i6f8/73Xc7dGG48/ZCKxaQQ6DuezBslzV64BiT9I7JijQCmcAN48DQLvxRiWl1s8Q/sLIJKo2YQd0Fao7OJaSOnyyYj78ymZRqTN/OWqXwKfERZGUvYON7u0W5Vm348CKu1sT+yeLucV7xBHBoqg+z1R+oZmq0vGPE=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b=AYZANZLF; arc=none smtp.client-ip=10.30.226.201
Received: by smtp.kernel.org (Postfix) with ESMTPSA id 7F4D7C4CEE4;
	Thu, 22 May 2025 07:17:53 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
	s=k20201202; t=1747898275;
	bh=RBfEx3162mbB+OlkOVLAYGSIHMmdR4c1LkTJqUJI4rE=;
	h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
	b=AYZANZLF1q+VpvyppqfCbYcdVmCTUt1BG6bjVEm1vkMYS+tA6MauObDFwHmEvXXYl
	 tqJ7sbVdb2kFRIFvUzQd4pZJemTWv0sfZJnRfr1/H7HJfXTVR6S9Sb6jiRwZGjaPbs
	 0g5sTSoxYVWHYMl3b75edj3CISgLu3o30HlsXzRxGMNwns4/mHgp6fiP9wWQBOmyEg
	 TG+i723euNjbiEqbD7Dysg2kvKNI1UEaC6/02q68FvmjiYkPe/XkOFd55kgg8Y3Swd
	 nN5Ss+YPQvcgiLEN5i1a7ICPE6VWeIg8l+N07wxjY4NTMupMPi4H4nG7DjmcWdw7VT
	 WeXQYTpGsCKPA==
From: Masahiro Yamada <masahiroy@kernel.org>
To: linux-kbuild@vger.kernel.org
Cc: linux-kernel@vger.kernel.org,
	Masahiro Yamada <masahiroy@kernel.org>,
	Alex Shi <alexs@kernel.org>,
	Dongliang Mu <dzm91@hust.edu.cn>,
	Federico Vaga <federico.vaga@vaga.pv.it>,
	Jonathan Corbet <corbet@lwn.net>,
	Matthias Maennich <maennich@google.com>,
	Yanteng Si <si.yanteng@linux.dev>,
	linux-doc@vger.kernel.org
Subject: [PATCH 3/3] docs/core-api/symbol-namespaces: drop table of contents and section numbering
Date: Thu, 22 May 2025 16:17:22 +0900
Message-ID: <20250522071744.2362563-3-masahiroy@kernel.org>
X-Mailer: git-send-email 2.43.0
In-Reply-To: <20250522071744.2362563-1-masahiroy@kernel.org>
References: <20250522071744.2362563-1-masahiroy@kernel.org>
Precedence: bulk
X-Mailing-List: linux-kbuild@vger.kernel.org
List-Id: <linux-kbuild.vger.kernel.org>
List-Subscribe: <mailto:linux-kbuild+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-kbuild+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=a
Content-Transfer-Encoding: 8bit

The manually updated table of contents and section numbering are hard
to maintain.

Make changes similar to the following commits:

  5e8f0ba38a4d ("docs/kbuild/makefiles: throw out the local table of contents")
  1a4c1c9df72e ("docs/kbuild/makefiles: drop section numbering, use references")

Signed-off-by: Masahiro Yamada <masahiroy@kernel.org>
---

 Documentation/core-api/symbol-namespaces.rst  | 45 +++++++------------
 .../it_IT/core-api/symbol-namespaces.rst      | 32 +++++++------
 .../zh_CN/core-api/symbol-namespaces.rst      | 41 +++++++----------
 3 files changed, 47 insertions(+), 71 deletions(-)

diff --git a/Documentation/core-api/symbol-namespaces.rst b/Documentation/core-api/symbol-namespaces.rst
index c6f59c5e2564..f7cfa7b73e97 100644
--- a/Documentation/core-api/symbol-namespaces.rst
+++ b/Documentation/core-api/symbol-namespaces.rst
@@ -6,18 +6,8 @@ The following document describes how to use Symbol Namespaces to structure the
 export surface of in-kernel symbols exported through the family of
 EXPORT_SYMBOL() macros.
 
-.. Table of Contents
-
-	=== 1 Introduction
-	=== 2 How to define Symbol Namespaces
-	   --- 2.1 Using the EXPORT_SYMBOL macros
-	   --- 2.2 Using the DEFAULT_SYMBOL_NAMESPACE define
-	=== 3 How to use Symbols exported in Namespaces
-	=== 4 Loading Modules that use namespaced Symbols
-	=== 5 Automatically creating MODULE_IMPORT_NS statements
-
-1. Introduction
-===============
+Introduction
+============
 
 Symbol Namespaces have been introduced as a means to structure the export
 surface of the in-kernel API. It allows subsystem maintainers to partition
@@ -31,15 +21,15 @@ its configuration, reject loading the module or warn about a missing import.
 Additionally, it is possible to put symbols into a module namespace, strictly
 limiting which modules are allowed to use these symbols.
 
-2. How to define Symbol Namespaces
-==================================
+How to define Symbol Namespaces
+===============================
 
 Symbols can be exported into namespace using different methods. All of them are
 changing the way EXPORT_SYMBOL and friends are instrumented to create ksymtab
 entries.
 
-2.1 Using the EXPORT_SYMBOL macros
-==================================
+Using the EXPORT_SYMBOL macros
+------------------------------
 
 In addition to the macros EXPORT_SYMBOL() and EXPORT_SYMBOL_GPL(), that allow
 exporting of kernel symbols to the kernel symbol table, variants of these are
@@ -57,8 +47,8 @@ refer to ``NULL``. There is no default namespace if none is defined. ``modpost``
 and kernel/module/main.c make use the namespace at build time or module load
 time, respectively.
 
-2.2 Using the DEFAULT_SYMBOL_NAMESPACE define
-=============================================
+Using the DEFAULT_SYMBOL_NAMESPACE define
+-----------------------------------------
 
 Defining namespaces for all symbols of a subsystem can be very verbose and may
 become hard to maintain. Therefore a default define (DEFAULT_SYMBOL_NAMESPACE)
@@ -86,8 +76,8 @@ unit as preprocessor statement. The above example would then read::
 within the corresponding compilation unit before the #include for
 <linux/export.h>. Typically it's placed before the first #include statement.
 
-2.3 Using the EXPORT_SYMBOL_GPL_FOR_MODULES() macro
-===================================================
+Using the EXPORT_SYMBOL_GPL_FOR_MODULES() macro
+-----------------------------------------------
 
 Symbols exported using this macro are put into a module namespace. This
 namespace cannot be imported.
@@ -102,8 +92,8 @@ For example:
 will limit usage of this symbol to modules whoes name matches the given
 patterns.
 
-3. How to use Symbols exported in Namespaces
-============================================
+How to use Symbols exported in Namespaces
+=========================================
 
 In order to use symbols that are exported into namespaces, kernel modules need
 to explicitly import these namespaces. Otherwise the kernel might reject to
@@ -125,11 +115,10 @@ inspected with modinfo::
 
 
 It is advisable to add the MODULE_IMPORT_NS() statement close to other module
-metadata definitions like MODULE_AUTHOR() or MODULE_LICENSE(). Refer to section
-5. for a way to create missing import statements automatically.
+metadata definitions like MODULE_AUTHOR() or MODULE_LICENSE().
 
-4. Loading Modules that use namespaced Symbols
-==============================================
+Loading Modules that use namespaced Symbols
+===========================================
 
 At module loading time (e.g. ``insmod``), the kernel will check each symbol
 referenced from the module for its availability and whether the namespace it
@@ -140,8 +129,8 @@ allow loading of modules that don't satisfy this precondition, a configuration
 option is available: Setting MODULE_ALLOW_MISSING_NAMESPACE_IMPORTS=y will
 enable loading regardless, but will emit a warning.
 
-5. Automatically creating MODULE_IMPORT_NS statements
-=====================================================
+Automatically creating MODULE_IMPORT_NS statements
+==================================================
 
 Missing namespaces imports can easily be detected at build time. In fact,
 modpost will emit a warning if a module uses a symbol from a namespace
diff --git a/Documentation/translations/it_IT/core-api/symbol-namespaces.rst b/Documentation/translations/it_IT/core-api/symbol-namespaces.rst
index 6ee713988531..baa344f4523a 100644
--- a/Documentation/translations/it_IT/core-api/symbol-namespaces.rst
+++ b/Documentation/translations/it_IT/core-api/symbol-namespaces.rst
@@ -10,8 +10,8 @@ Questo documento descrive come usare lo spazio dei nomi dei simboli
 per strutturare quello che viene esportato internamente al kernel
 grazie alle macro della famiglia EXPORT_SYMBOL().
 
-1. Introduzione
-===============
+Introduzione
+============
 
 Lo spazio dei nomi dei simboli Ã¨ stato introdotto come mezzo per strutturare
 l'API esposta internamente al kernel. Permette ai manutentori di un
@@ -24,15 +24,15 @@ devono prima importare detto spazio. Altrimenti il kernel, a seconda
 della configurazione, potrebbe rifiutare di caricare il modulo o
 avvisare l'utente di un'importazione mancante.
 
-2. Come definire uno spazio dei nomi dei simboli
-================================================
+Come definire uno spazio dei nomi dei simboli
+=============================================
 
 I simboli possono essere esportati in spazi dei nomi usando diversi
 meccanismi.  Tutti questi meccanismi cambiano il modo in cui
 EXPORT_SYMBOL e simili vengono guidati verso la creazione di voci in ksymtab.
 
-2.1 Usare le macro EXPORT_SYMBOL
-================================
+Usare le macro EXPORT_SYMBOL
+----------------------------
 
 In aggiunta alle macro EXPORT_SYMBOL() e EXPORT_SYMBOL_GPL(), che permettono
 di esportare simboli del kernel nella rispettiva tabella, ci sono
@@ -53,8 +53,8 @@ di base. Il programma ``modpost`` e il codice in kernel/module/main.c usano lo
 spazio dei nomi, rispettivamente, durante la compilazione e durante il
 caricamento di un modulo.
 
-2.2 Usare il simbolo di preprocessore DEFAULT_SYMBOL_NAMESPACE
-==============================================================
+Usare il simbolo di preprocessore DEFAULT_SYMBOL_NAMESPACE
+----------------------------------------------------------
 
 Definire lo spazio dei nomi per tutti i simboli di un sottosistema puÃ² essere
 logorante e di difficile manutenzione. PerciÃ² Ã¨ stato fornito un simbolo
@@ -83,8 +83,8 @@ direttamente nei file da compilare. L'esempio precedente diventerebbe::
 
 Questo va messo prima di un qualsiasi uso di EXPORT_SYMBOL.
 
-3. Come usare i simboli esportati attraverso uno spazio dei nomi
-================================================================
+Come usare i simboli esportati attraverso uno spazio dei nomi
+=============================================================
 
 Per usare i simboli esportati da uno spazio dei nomi, i moduli del
 kernel devono esplicitamente importare il relativo spazio dei nomi; altrimenti
@@ -108,12 +108,10 @@ modinfo::
 
 
 Si consiglia di posizionare la dichiarazione MODULE_IMPORT_NS() vicino
-ai metadati del modulo come MODULE_AUTHOR() o MODULE_LICENSE(). Fate
-riferimento alla sezione 5. per creare automaticamente le importazioni
-mancanti.
+ai metadati del modulo come MODULE_AUTHOR() o MODULE_LICENSE().
 
-4. Caricare moduli che usano simboli provenienti da spazi dei nomi
-==================================================================
+Caricare moduli che usano simboli provenienti da spazi dei nomi
+===============================================================
 
 Quando un modulo viene caricato (per esempio usando ``insmod``), il kernel
 verificherÃ  la disponibilitÃ  di ogni simbolo usato e se lo spazio dei nomi
@@ -125,8 +123,8 @@ un'opzione di configurazione: impostare
 MODULE_ALLOW_MISSING_NAMESPACE_IMPORTS=y caricherÃ  i moduli comunque ma
 emetterÃ  un avviso.
 
-5. Creare automaticamente la dichiarazione MODULE_IMPORT_NS
-===========================================================
+Creare automaticamente la dichiarazione MODULE_IMPORT_NS
+========================================================
 
 La mancanza di un'importazione puÃ² essere individuata facilmente al momento
 della compilazione. Infatti, modpost emetterÃ  un avviso se il modulo usa
diff --git a/Documentation/translations/zh_CN/core-api/symbol-namespaces.rst b/Documentation/translations/zh_CN/core-api/symbol-namespaces.rst
index b1bec219912d..d9477ccea98f 100644
--- a/Documentation/translations/zh_CN/core-api/symbol-namespaces.rst
+++ b/Documentation/translations/zh_CN/core-api/symbol-namespaces.rst
@@ -14,18 +14,8 @@
 
 æ¬ææ¡£æè¿°äºå¦ä½ä½¿ç¨ç¬¦å·å½åç©ºé´æ¥æé éè¿EXPORT_SYMBOL()ç³»åå®å¯¼åºçåæ ¸åç¬¦å·çå¯¼åºé¢ã
 
-.. ç®å½
-
-       === 1 ç®ä»
-       === 2 å¦ä½å®ä¹ç¬¦å·å½åç©ºé´
-          --- 2.1 ä½¿ç¨EXPORT_SYMBOLå®
-          --- 2.2 ä½¿ç¨DEFAULT_SYMBOL_NAMESPACEå®ä¹
-       === 3 å¦ä½ä½¿ç¨å½åç©ºé´ä¸­å¯¼åºçç¬¦å·
-       === 4 å è½½ä½¿ç¨å½åç©ºé´ç¬¦å·çæ¨¡å
-       === 5 èªå¨åå»ºMODULE_IMPORT_NSå£°æ
-
-1. ç®ä»
-=======
+ç®ä»
+====
 
 ç¬¦å·å½åç©ºé´å·²ç»è¢«å¼å¥ï¼ä½ä¸ºæé åæ ¸åAPIçå¯¼åºé¢çä¸ç§ææ®µãå®åè®¸å­ç³»ç»ç»´æ¤èå°
 ä»ä»¬å¯¼åºçç¬¦å·ååè¿ç¬ç«çå½åç©ºé´ãè¿å¯¹äºææ¡£çç¼åéå¸¸æç¨ï¼æ³æ³SUBSYSTEM_DEBUG
@@ -33,14 +23,14 @@
 çæ¨¡åå¿é¡»å¯¼å¥å½åç©ºé´ãå¦åï¼åæ ¸å°æ ¹æ®å¶éç½®ï¼æç»å è½½è¯¥æ¨¡åæè­¦åè¯´ç¼ºå°
 å¯¼å¥ã
 
-2. å¦ä½å®ä¹ç¬¦å·å½åç©ºé´
-=======================
+å¦ä½å®ä¹ç¬¦å·å½åç©ºé´
+====================
 
 ç¬¦å·å¯ä»¥ç¨ä¸åçæ¹æ³å¯¼åºå°å½åç©ºé´ãææè¿äºé½å¨æ¹å EXPORT_SYMBOL åä¸ä¹ç±»ä¼¼çé£äºå®
 è¢«æ£æµå°çæ¹å¼ï¼ä»¥åå»º ksymtab æ¡ç®ã
 
-2.1 ä½¿ç¨EXPORT_SYMBOLå®
-=======================
+ä½¿ç¨EXPORT_SYMBOLå®
+-------------------
 
 é¤äºåè®¸å°åæ ¸ç¬¦å·å¯¼åºå°åæ ¸ç¬¦å·è¡¨çå®EXPORT_SYMBOL()åEXPORT_SYMBOL_GPL()ä¹å¤ï¼
 è¿äºå®çåä½è¿å¯ä»¥å°ç¬¦å·å¯¼åºå°æä¸ªå½åç©ºé´ï¼EXPORT_SYMBOL_NS() å EXPORT_SYMBOL_NS_GPL()ã
@@ -54,8 +44,8 @@
 å¯¼åºæ¶æªææå½åç©ºé´çç¬¦å·å°æå ``NULL`` ãå¦ææ²¡æå®ä¹å½åç©ºé´ï¼åé»è®¤æ²¡æã
 ``modpost`` åkernel/module/main.cåå«å¨æå»ºæ¶ææ¨¡åå è½½æ¶ä½¿ç¨åç§°ç©ºé´ã
 
-2.2 ä½¿ç¨DEFAULT_SYMBOL_NAMESPACEå®ä¹
-====================================
+ä½¿ç¨DEFAULT_SYMBOL_NAMESPACEå®ä¹
+--------------------------------
 
 ä¸ºä¸ä¸ªå­ç³»ç»çææç¬¦å·å®ä¹å½åç©ºé´å¯è½ä¼éå¸¸åé¿ï¼å¹¶å¯è½åå¾é¾ä»¥ç»´æ¤ãå æ­¤ï¼æ
 ä»¬æä¾äºä¸ä¸ªé»è®¤å®ä¹ï¼DEFAULT_SYMBOL_NAMESPACEï¼ï¼å¦æè®¾ç½®äºè¿ä¸ªå®ä¹ï¼ å®å°æ
@@ -80,8 +70,8 @@
 
 åºç½®äºç¸å³ç¼è¯ååä¸­ä»»ä½ EXPORT_SYMBOL å®ä¹å
 
-3. å¦ä½ä½¿ç¨å½åç©ºé´ä¸­å¯¼åºçç¬¦å·
-===============================
+å¦ä½ä½¿ç¨å½åç©ºé´ä¸­å¯¼åºçç¬¦å·
+============================
 
 ä¸ºäºä½¿ç¨è¢«å¯¼åºå°å½åç©ºé´çç¬¦å·ï¼åæ ¸æ¨¡åéè¦æç¡®å°å¯¼å¥è¿äºå½åç©ºé´ã
 å¦ååæ ¸å¯è½ä¼æç»å è½½è¯¥æ¨¡åãæ¨¡åä»£ç éè¦ä½¿ç¨å®MODULE_IMPORT_NSæ¥
@@ -100,11 +90,10 @@
 
 
 å»ºè®®å° MODULE_IMPORT_NS() è¯­å¥æ·»å å°é è¿å¶ä»æ¨¡ååæ°æ®å®ä¹çå°æ¹ï¼
-å¦ MODULE_AUTHOR() æ MODULE_LICENSE() ãå³äºèªå¨åå»ºç¼ºå¤±çå¯¼å¥
-è¯­å¥çæ¹æ³ï¼è¯·åèç¬¬5èã
+å¦ MODULE_AUTHOR() æ MODULE_LICENSE() ã
 
-4. å è½½ä½¿ç¨å½åç©ºé´ç¬¦å·çæ¨¡å
-=============================
+å è½½ä½¿ç¨å½åç©ºé´ç¬¦å·çæ¨¡å
+==========================
 
 å¨æ¨¡åå è½½æ¶ï¼æ¯å¦ ``insmod`` ï¼ï¼åæ ¸å°æ£æ¥æ¯ä¸ªä»æ¨¡åä¸­å¼ç¨çç¬¦å·æ¯å¦å¯
 ç¨ï¼ä»¥åå®å¯è½è¢«å¯¼åºå°çåå­ç©ºé´æ¯å¦è¢«æ¨¡åå¯¼å¥ãåæ ¸çé»è®¤è¡ä¸ºæ¯æç»
@@ -113,8 +102,8 @@ EINVALæ¹å¼å¤±è´¥ãè¦åè®¸å è½½ä¸æ»¡è¶³è¿ä¸ªåææ¡ä»¶çæ¨¡åï¼å¯
 è®¾ç½® MODULE_ALLOW_MISSING_NAMESPACE_IMPORTS=y å°ä½¿å è½½ä¸åå½±åï¼ä½ä¼
 ååºè­¦åã
 
-5. èªå¨åå»ºMODULE_IMPORT_NSå£°æ
-===============================
+èªå¨åå»ºMODULE_IMPORT_NSå£°æ
+============================
 
 ç¼ºå°å½åç©ºé´çå¯¼å¥å¯ä»¥å¨æå»ºæ¶å¾å®¹æè¢«æ£æµå°ãäºå®ä¸ï¼å¦æä¸ä¸ªæ¨¡å
 ä½¿ç¨äºä¸ä¸ªå½åç©ºé´çç¬¦å·èæ²¡æå¯¼å¥å®ï¼modpostä¼ååºè­¦åã
-- 
2.43.0


