Return-Path: <linux-kbuild-owner@vger.kernel.org>
X-Original-To: lists+linux-kbuild@lfdr.de
Delivered-To: lists+linux-kbuild@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 9BF9B1231E8
	for <lists+linux-kbuild@lfdr.de>; Tue, 17 Dec 2019 17:18:36 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1729010AbfLQQPw (ORCPT <rfc822;lists+linux-kbuild@lfdr.de>);
        Tue, 17 Dec 2019 11:15:52 -0500
Received: from mail-pl1-f194.google.com ([209.85.214.194]:38764 "EHLO
        mail-pl1-f194.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1728996AbfLQQPv (ORCPT
        <rfc822;linux-kbuild@vger.kernel.org>);
        Tue, 17 Dec 2019 11:15:51 -0500
Received: by mail-pl1-f194.google.com with SMTP id f20so4551128plj.5;
        Tue, 17 Dec 2019 08:15:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=from:to:cc:subject:date:message-id:mime-version
         :content-transfer-encoding;
        bh=CZrp8UQQ+bj1ts8a/GF/7XEl3PQrDG+nT1WZvWpq3rU=;
        b=ElECYMtBZrjFvxUHRBwyhYr5cB2bkw1bFyOwZFb0Co8YbMQh1sOaOIWqnnAufDE3iN
         zuUHWh27aaD86ekJA8WIqAVyJ+MhhEXpIYhymS8vUsjkuABzSXFR+wS47PnqxgpZ4i/1
         Lv6MpQzcUayUOX/m6RgVbqKZB26xKyv2OBmimMy3dzXWkw0o30zzQ97opWZ3h5ULU0ZE
         iPVwg/WHbTgScdQb8xnitqtLzV3RzMTQ2J2IMHPrBt7WNa9HD3ZYuOh0N79qR16jRSwZ
         Zxdh5E6l61Fk+dzWCsgdwaBHtAlFqVrx7Wb/VJBXvcDNgEBFjcbyjDWShvNPCqdv7ZK8
         enuA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
         :content-transfer-encoding;
        bh=CZrp8UQQ+bj1ts8a/GF/7XEl3PQrDG+nT1WZvWpq3rU=;
        b=iv1QN7db1pHP2hlxQWnW0bzRnBv//XnUr01uBTQ6o23yc2QTVnHO57Sta8JouGV/dR
         sSQSDj2ZNgE17MMC3m93JERaguY/ZU6HsC+6Wn1hwTCzcWxhYi5/FVTf6SY5raGp7zrh
         nvSQW5uPefvbFy6Hljy8AM/wMJ2jzKdVQ+Cc6GwZRcTuxuPV9RhOeq6uTodseWTtC4Vu
         X5lUzTdkPAmVdsMiDmpcmFOlTw9+ANOAhjyY0+DaOud9GP8n2rmwISM+0u24C39mQJv1
         lE4ETMubw4OUzBVqTRPO+4fmxX/c93e9IdNIXFfZ7qgNvPk4BgB/uKEzLd9OgfBaYxZK
         DIdQ==
X-Gm-Message-State: APjAAAVm7xo+lrmKAgqLPsZya21kvSb4IpQry0JbutWED6A5FM0DfdnA
        7KBHA2Qe6WTkS9DrF6fXcPwu4p6cwDg=
X-Google-Smtp-Source: APXvYqyIekrKyUdm7+MOpp/lryRy6OV5UID6PpLqjzjTibQ1QruJuc89eTrWbhjtW8+MHpFU6P8mzQ==
X-Received: by 2002:a17:902:6b09:: with SMTP id o9mr13938481plk.209.1576599349747;
        Tue, 17 Dec 2019 08:15:49 -0800 (PST)
Received: from glados.lan ([2601:647:4c01:6541:fa16:54ff:fed1:1bd6])
        by smtp.gmail.com with ESMTPSA id k15sm27704122pfg.37.2019.12.17.08.15.48
        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
        Tue, 17 Dec 2019 08:15:48 -0800 (PST)
From:   Thomas Hebb <tommyhebb@gmail.com>
To:     linux-kernel@vger.kernel.org, linux-kbuild@vger.kernel.org
Cc:     Masahiro Yamada <masahiroy@kernel.org>,
        Thomas Hebb <tommyhebb@gmail.com>,
        Palmer Dabbelt <palmer@dabbelt.com>,
        Paul Walmsley <paul.walmsley@sifive.com>,
        linux-riscv@lists.infradead.org
Subject: [PATCH v2 0/3] kconfig: rework symbol help text
Date:   Tue, 17 Dec 2019 08:15:42 -0800
Message-Id: <cover.1576599202.git.tommyhebb@gmail.com>
X-Mailer: git-send-email 2.24.1
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
Sender: linux-kbuild-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kbuild.vger.kernel.org>
X-Mailing-List: linux-kbuild@vger.kernel.org

This series fixes several issues with help text generated by Kconfig,
mainly affecting symbols that are defined in multiple places. Although
results of these patches are somewhat visible for the symbols in Linux,
what prompted me to write the series was working on U-Boot, which also
uses Kconfig and makes very heavy use of multiple definitions (e.g. for
overriding defaults). I have provided Linux examples where I could find
them, but the example for the biggest patch (the first one) is taken
from U-Boot because it was more illustrative than anything I could find
in Linux.

Changes in v2:
- Added explicit U-Boot version in commit message + other rewordings
- Made the new "Depends on:" line print actual dependencies instead of
  visibility to avoid an intra-series regression, and noted that in the
  commit message.
- Get rid of redundant "with prompt" and "without prompt" notes in
  definition text, but continue to ensure that definitions with prompts
  are printed before ones without.
- Fixed checkpatch issues
- Omit already-merged patch "kconfig: don't crash on NULL expressions in
  expr_eq()"

Thomas Hebb (3):
  kconfig: list all definitions of a symbol in help text
  kconfig: distinguish between dependencies and visibility in help text
  kconfig: fix nesting of symbol help text

 scripts/kconfig/expr.c |  3 +-
 scripts/kconfig/expr.h |  1 +
 scripts/kconfig/menu.c | 82 +++++++++++++++++++++++++-----------------
 3 files changed, 52 insertions(+), 34 deletions(-)

-- 
2.24.1

