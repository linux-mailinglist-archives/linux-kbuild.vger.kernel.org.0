Return-Path: <linux-kbuild-owner@vger.kernel.org>
X-Original-To: lists+linux-kbuild@lfdr.de
Delivered-To: lists+linux-kbuild@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id AFE564048D4
	for <lists+linux-kbuild@lfdr.de>; Thu,  9 Sep 2021 13:02:06 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S234349AbhIILDO (ORCPT <rfc822;lists+linux-kbuild@lfdr.de>);
        Thu, 9 Sep 2021 07:03:14 -0400
Received: from conssluserg-03.nifty.com ([210.131.2.82]:57718 "EHLO
        conssluserg-03.nifty.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S234216AbhIILDO (ORCPT
        <rfc822;linux-kbuild@vger.kernel.org>);
        Thu, 9 Sep 2021 07:03:14 -0400
Received: from mail-pf1-f176.google.com (mail-pf1-f176.google.com [209.85.210.176]) (authenticated)
        by conssluserg-03.nifty.com with ESMTP id 189B1nr9024809;
        Thu, 9 Sep 2021 20:01:50 +0900
DKIM-Filter: OpenDKIM Filter v2.10.3 conssluserg-03.nifty.com 189B1nr9024809
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=nifty.com;
        s=dec2015msa; t=1631185310;
        bh=nZfFg/JwDacjaTOLCboRuBQ6A+RYt6dHwDsyrC1BjG0=;
        h=References:In-Reply-To:From:Date:Subject:To:Cc:From;
        b=gsGVGB59VhtqgkNoD6ckbHiPd97O406ngyVMGyakbRrILR6n1qazziSVIMrXNDwWP
         cdWp3nwXqvVKmOjMggDRFgUhQaylFu7n2tYV3Ug4jeY2aebw144sH+gCRew8HX39Jn
         8pjUlF4jArb82Y6/x9bhetRQBXr/fk81pY8PVv7crBrnV70IHvT3gC72mae+sIX6cM
         hnBZyZRvs+a6GK4LKEISKv8ZkRJR60e74sS/DCmhqCCmwEhoNrRmJLQCBI0yIg2k7J
         pfqI3JdgdRcKIz7DU/slolyS+ZruWfiQizTWbHcDn3/Cio19Xu8oukTuVJZEjxdY7a
         kpv/xL9d47RmA==
X-Nifty-SrcIP: [209.85.210.176]
Received: by mail-pf1-f176.google.com with SMTP id m26so1454291pff.3;
        Thu, 09 Sep 2021 04:01:49 -0700 (PDT)
X-Gm-Message-State: AOAM532lOqbxb0ebhVp8O9ns/Wcc+EJ9MNOhJyf19M3lADmzdHKdl5Cs
        kic/t/4i91gflZmEC1zqwbkuFxd7VhKDlO1ljwg=
X-Google-Smtp-Source: ABdhPJyw7Aayt9CY7VD9ORFmSgdPI2JfaYnLCELWBhkqW4xRoDatIy6RguQ8KldM3TDq1+wUZAQPMJYM66AGuzCxbm0=
X-Received: by 2002:aa7:9e8d:0:b0:406:be8:2413 with SMTP id
 p13-20020aa79e8d000000b004060be82413mr2637188pfq.66.1631185309107; Thu, 09
 Sep 2021 04:01:49 -0700 (PDT)
MIME-Version: 1.0
References: <20210908032847.18683-1-kortanzh@gmail.com> <YTjt5C7xTqNLUSl/@archlinux-ax161>
In-Reply-To: <YTjt5C7xTqNLUSl/@archlinux-ax161>
From:   Masahiro Yamada <masahiroy@kernel.org>
Date:   Thu, 9 Sep 2021 20:01:11 +0900
X-Gmail-Original-Message-ID: <CAK7LNATA2-4jSfOCmdtgQ+cuAyXhyLCBuVEZkZ3nONZFV8z3EA@mail.gmail.com>
Message-ID: <CAK7LNATA2-4jSfOCmdtgQ+cuAyXhyLCBuVEZkZ3nONZFV8z3EA@mail.gmail.com>
Subject: Re: [PATCH v2] gen_compile_commands: fix missing 'sys' package
To:     Nathan Chancellor <nathan@kernel.org>
Cc:     Kortan <kortanzh@gmail.com>,
        Nick Desaulniers <ndesaulniers@google.com>,
        Linux Kbuild mailing list <linux-kbuild@vger.kernel.org>,
        llvm@lists.linux.dev,
        clang-built-linux <clang-built-linux@googlegroups.com>,
        Linux Kernel Mailing List <linux-kernel@vger.kernel.org>
Content-Type: text/plain; charset="UTF-8"
Precedence: bulk
List-ID: <linux-kbuild.vger.kernel.org>
X-Mailing-List: linux-kbuild@vger.kernel.org

On Thu, Sep 9, 2021 at 2:07 AM Nathan Chancellor <nathan@kernel.org> wrote:
>
> On Wed, Sep 08, 2021 at 11:28:48AM +0800, Kortan wrote:
> > We need to import the 'sys' package since the script has called
> > sys.exit() method.
> >
> > Signed-off-by: Kortan <kortanzh@gmail.com>
>
> Thank you for making those changes!
>
> I should have mentioned that this probably warrants a Fixes: tag, which
> can be generated by running:
>
> $ git show -s --format='Fixes: %h ("%s")' 6ad7cbc01527223f3f92baac9b122f15651cf76b
> Fixes: 6ad7cbc01527 ("Makefile: Add clang-tidy and static analyzer support to makefile")
>
> as that was the patch that introduced this issue. I personally have a
> git alias for this as it comes up enough.
>
> $ git config --get alias.fixes
> show -s --format="Fixes: %h (\"%s\")"
>
> I do not think this warrants a v3, just something to keep in mind for
> the future.
>
> Fixes: 6ad7cbc01527 ("Makefile: Add clang-tidy and static analyzer support to makefile")
> Reviewed-by: Nathan Chancellor <nathan@kernel.org>


Applied to linux-kbuild
with Fixes and Nathan's Reviewed-by.
Thanks.



> > ---
> > Changes v1 -> v2:
> > * Fix commit title.
> > * Improve commit message.
> >
> >  scripts/clang-tools/gen_compile_commands.py | 1 +
> >  1 file changed, 1 insertion(+)
> >
> > diff --git a/scripts/clang-tools/gen_compile_commands.py b/scripts/clang-tools/gen_compile_commands.py
> > index 0033eedce003..1d1bde1fd45e 100755
> > --- a/scripts/clang-tools/gen_compile_commands.py
> > +++ b/scripts/clang-tools/gen_compile_commands.py
> > @@ -13,6 +13,7 @@ import logging
> >  import os
> >  import re
> >  import subprocess
> > +import sys
> >
> >  _DEFAULT_OUTPUT = 'compile_commands.json'
> >  _DEFAULT_LOG_LEVEL = 'WARNING'
> > --
> > 2.33.0
> >
> >



-- 
Best Regards
Masahiro Yamada
